(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-abb074e2"],{5097:function(t,a,i){"use strict";i("929e")},"651b":function(t,a,i){"use strict";i.r(a);var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{attrs:{id:"map"}},[i("van-nav-bar",{attrs:{title:"请选择地址","right-text":"确定","left-text":"返回","left-arrow":"",fixed:""},on:{"click-left":t.back,"click-right":t.sure}}),i("div",{attrs:{id:"mapMain"}}),i("p",{staticClass:"tips"},[t._v("你当前所在的位置")]),0==t.position?i("van-cell",{attrs:{title:"请选择地点"}}):t._e(),i("van-cell",{staticStyle:{"margin-bottom":"1rem"},attrs:{size:"large",title:t.position.name,label:t.position.address}}),i("p",{staticClass:"tips"},[t._v("周边地点")]),0==t.dataList?i("van-cell",{attrs:{title:"无地点"}}):t._e(),t._l(t.dataList,(function(a,e){return i("van-cell",{key:e,attrs:{size:"large",title:a.name,label:a.address},on:{click:function(i){return t.choiceAdress(a)}}})}))],2)},o=[],n=(i("d81d"),i("d399")),s={props:{},components:{},computed:{},data:function(){return{marker:{},map:{},user:{position:[114.397169,30.50576],content:""},position:{},dataList:[],center:[114.397169,30.50576],searchOption:{city:this.city,citylimit:!0}}},methods:{choiceAdress:function(t){this.position=t,console.log(t),this.map.remove(this.marker),this.marker=new AMap.Marker({position:[t.location.lng,t.location.lat],offset:new AMap.Pixel(-13,-30)}),this.map.add(this.marker)},back:function(){this.$router.push("home")},sure:function(){this.$store.commit("changeAddress",this.position),this.$router.push("home")},initMap:function(){var t=this;this.map=new AMap.Map("mapMain",{zoom:16}),AMap.plugin(["AMap.ToolBar","AMap.PlaceSearch","AMap.Geolocation"],(function(){var a=new AMap.ToolBar;t.map.addControl(a);var i=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"LB"});t.map.addControl(i)})),t.map.on("complete",(function(){console.log("地图完成")})),t.map.on("click",(function(a){t.map.remove(t.marker),t.center=[a.lnglat.getLng(),a.lnglat.getLat()],t.marker=new AMap.Marker({position:t.center,offset:new AMap.Pixel(-13,-30)}),t.map.add(t.marker),t.getData()})),t.map.on("dragstart",(function(){})),t.map.on("dragend",(function(){}))},getData:function(){var t=this,a=new AMap.PlaceSearch({pageSize:5,pageIndex:1,autoFitView:!0});a.searchNearBy("",t.center,200,(function(a,i){"no_data"===a?(n["a"].fail("无数据"),t.dataList={}):"error"===a?n["a"].fail(i):(t.dataList=i.poiList.pois,t.position=t.dataList[0]),console.log(t.dataList)}))},dragend:function(){}},created:function(){},mounted:function(){this.position=this.$store.state.position,this.initMap(),console.log(this.position.location),this.position.location&&(this.center=[this.position.location.lng,this.position.location.lat]),this.getData()},activated:function(){this.initMap()}},r=s,c=(i("5097"),i("2877")),l=Object(c["a"])(r,e,o,!1,null,"0805700e",null);a["default"]=l.exports},"929e":function(t,a,i){},d81d:function(t,a,i){"use strict";var e=i("23e7"),o=i("b727").map,n=i("1dde"),s=i("ae40"),r=n("map"),c=s("map");e({target:"Array",proto:!0,forced:!r||!c},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);